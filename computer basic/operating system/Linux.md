# Linux

## Linux的文件权限与目录配置

### 1. 用户与用户组

- 文件所有者
- 用户组
- 其他人

### 2. 文件权限

- #### **Linux文件属性**

  - **查看** `ls -al` `-rw-r--rr 1 root root 42304 Sep 4 18:26 install.log`

    - 第一个字符代表这个文件是“目录、文件或链接文件”
      - [d] 目录
      - [-] 文件
      - [l] 连接文件
      - [b] 接口设备
      - [c] 串行端口设备
    - 接下来三组三个字符
      - 第一组 “文件所有者的权限”
      - 第二组 “同用户组的权限”
      - 第三组 “其他非本用户组的权限”
    - 第二列表示文件的连接数
    - 第三列 这个文件的“所有者账号”
    - 第四列 这个文件的所属用户组
    - 第五列 文件的容量大小
    - 第六列 创建日期或修改日期
    - 第七列 文件名

  - **修改权限**

    - `chgrp` 改变文件所属用户组
    - `chown` 改变文件所有者
    - `chmod` 改变文件的权限

  - **目录与文件的权限意义**

    - |      |       文件        |                    目录                    |
      | :--: | :-------------: | :--------------------------------------: |
      |  r   |      读取此文件      |              具有读取目录结构列表的权限               |
      |  w   |     修改文件内容      | 具有更改该目录结构列表的权限:<br />新建新的文件与目录；<br />删除已经存在的文件与目录；<br />将已存在的文件或目录进行重命名;<br />转移该目录的文件、目录位置 |
      |  x   | 该文件具有可以被系统执行的权限 |             用户能否进行该目录称为工作目录              |

  - **Linux文件种类与扩展名**

    - |         |                                          |
      | :-----: | :--------------------------------------: |
      |  普通文件   |            纯文本文件；二进制文件；数据格式文件            |
      |   目录    |                   [d]                    |
      |  连接文件   |                   [l]                    |
      | 设备与设备文件 | 在/dev目录下：**块设备文件/dev/sda；字符设备文件[c] 串行端口** |
      |   套接字   |          网络上的数据连接 [s] /var/run           |
      |   管道    |          解决多个程序同时访问一个文件所造成的错误问题          |

  - **目录树**

    - |                              |                            |
      | :--------------------------: | :------------------------: |
      |              /               |           开机系统有关           |
      | /usr(Unix software resourse) |         软件安装、执行有关          |
      |        /var（variable）        |         与系统运作过程有关          |
      |             /bin             |     单用户维护模式下还能够被操作的命令      |
      |            /boot             |         开机会使用到的文件          |
      |             /dev             |            设备文件            |
      |             /etc             |          系统的配置文件           |
      |            /home             |           用户主文件夹           |
      |             /lib             |         开机时用到的函数库          |
      |            /media            |           可删除的设备           |
      |             /mnt             |          暂时挂载的设备           |
      |             /opt             |         第三方软件放置的目录         |
      |            /root             |         系统管理员的主文件夹         |
      |            /sbin             | 开机过程中所有的，开机、修复、还原系统所需要的命令  |
      |             /srv             |  网络服务启动之后，这些服务所需要去用的数据目录   |
      |             /tmp             |            临时目录            |
      |         /lost+found          | 当文件系统发生错误，将一些丢失的片段放置在这个目录下 |
      |            /proc             |           虚拟文件系统           |
      |             /sys             |     虚拟文件系统，记录与内核相关的信息      |

      ​

  ## Linux文件与目录管理

  ### 目录的相关操作

  - `cd` 切换目录
  - `.` 代表此层目录
  - `..` 代表上一层目录
  - `-` 代表前一个工作目录
  - `~` 代表家目录
  - `pwd` 显示当前目录
  - `mkdir` 新建一个新的目录
  - `rmdir` 删除一个空的目录

  ### 执行文件路径的变量 $PATH

  - 不同身份用户默认的PATH不同，默认能够随意执行的命令也不同
  - PATH是可以修改的，所以一般用户还是可以通过修改PATH来执行某些位于`/sbin`或 `/usr/sbin`下的命令来查询

  ### 文件和目录管理

  - `ls` 查看文件与目录
  - `cp` `rm` `mv`
  - `basename` 取得文件名
  - `dirname` 取得目录名

  ### 文件内容查阅

  - `cat` 从第一行开始显示文件内容
  - `tac` 从最后一行开始显示
  - `nl` 显示的时候，顺便输出行号
  - `more` 一页一页的显示文件内容
  - `less` 与more类似，但是比more更好的是，它可以往前翻页
  - `head` 只看头几行
  - `tail` 只看结尾几行
  - `od` 以二进制的方式读取文件内容

  ### 修改文件时间或创建新文件 touch

  - mtime ： 当该文件的“内容数据”更改时，就会更新这个时间。内容数据指的是文件的内容，而不是文件的属性或权限。
  - status time : 当该文件的状态改变时，就会更新这个时间，举例来说，像是权限与属性被更改了，就都会更新这个时间。
  - access time : 当“该文件的内容被取用”时，就会更新这个读取时间。

  **默认情况下，ls显示出来的是该文件的mtime，也就是这个文件的内容上次被更改的时间。**

  ### 文件默认权限 ： umask

  默认权限为 777，umask显示的分数为“**该默认值需要减掉的权限”**

  ### 查看文件类型

  - file

  ### 命令与文件的查询

  - `which` 寻找执行文件
  - `whereis` `locate` `find`寻找特定文件 

  ### 权限和命令间的关系

  - 让用户能进入目录成为“可工作目录”的基本权限是什么？
    - 可使用的命令：例如`cd`等切换工作目录的命令。
    - 目录所需权限：用户对这个至少需要具有`x`的权限。
    - 额外需求：如果用户想要在这个目录内利用`ls`查阅文件名，则用户对此目录还需要`r`的权限。